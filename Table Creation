/*
  Class Creation
*/
/*------------------------------------------------------------------
  Maintence_Item

  A maintenance service that Dave’s offers.
	Note: name has been changed to Mname due to query name conflict.
--------------------------------------------------------------------*/
CREATE TABLE Maintenance_Item (
	mName VARCHAR(40) NOT NULL,
	laborHours int,

	PRIMARY KEY maintenance_item_pk (mName),
);
 /*------------------------------------------------------------------
  Part_Maintenance

  A particular part as used within a given maintenance item.
--------------------------------------------------------------------*/
CREATE TABLE Part_Maintenance (
	mName VARCHAR(40) NOT NULL,
	partSerialNum int NOT NULL,

	PRIMARY KEY part_maintenance_pk (mName, partSerialNum),
	CONSTRAINT maintenance_item_part_maintenance_fk (mName) REFERENCES Maintenance_Item(mName),
	CONSTRAINT part_at_Daves_part_maintenance_fk (partSerialNum) REFERENCES part_at_Daves (serialNum)
);

 /*------------------------------------------------------------------
  Part_at_Daves

  A part that Dave’s has on hand for use in maintenance items.
--------------------------------------------------------------------*/
CREATE TABLE Part_at_Daves (
	orderedFromID int NOT NULL,
	serialNum int NOT NULL,

	PRIMARY KEY Part_at_Daves_pk (serialNum),
	CONSTRAINT Part_Order_Part_at_Daves_fk (orderedFromID) REFERENCES Part_Order (orderID)
);

 /*------------------------------------------------------------------
	Part_Order
--------------------------------------------------------------------*/
CREATE TABLE Part_Order (
	orderID int NOT NULL AUTO_INCREMENT,
	partName VARCHAR(50) NOT NULL,
	supplierName VARCHAR(50) NOT NULL, 
	date DATE,
	quantity int,
	priceForOne int,

	PRIMARY KEY Part_Order_pk (orderID),
	CONSTRAINT part_part_order_fk (partName) REFERENCES Part (name),
	CONSTRAINT supplier_part_prder_fk (supplierName) reference Supplier(supplierName),
	CONSTRAINT Part_Order_ck UNIQUE (partName, supplierName, date),
);

 /*------------------------------------------------------------------
	Merchandise_Item_Order
--------------------------------------------------------------------*/
CREATE TABLE Merchandise_Item_Order (
	merchandiseOrderID int NOT NULL AUTO_INCREMENT,
	supplierName VARCHAR(50) NOT NULL,
	merchandiseItem VARCHAR(50) NOT NULL,
	date Date,
	quantity int,
	priceForOne int,

	PRIMARY KEY Merchandise_Item_Order_pk (merchandiseOrderID),
	CONSTRAINT supplier_merchandise_item_order_fk (supplierName) REFERENCES Supplier(supplierName),
	CONSTRAINT merchandise_merchandise_item_order_fk (merchandiseItem) REFERENCES Merchandise(name),
	CONSTRAINT Merchandise_Item_Order_ck UNIQUE (supplierName, merchandiseItem, date)
);

 /*------------------------------------------------------------------
	Merchandise_Item_Instore
--------------------------------------------------------------------*/
CREATE TABLE Merchandise_Item_InStore (
	orderedFromID int NOT NULL,
	serialNum int NOT NULL,

	PRIMARY KEY Merchandise_Item_InStore_pk (serialNum)
	CONSTRAINT Merchandise_Item_Order_Merchandise_Item_InStore_fk (orderedFromID) REFERENCES Merchandise_Item_Order(merchandiseOrderID)
);
/*------------------------------------------------------------------
 Merchandise
--------------------------------------------------------------------*/
CREATE TABLE Merchandise (
	name VARCHAR(50) NOT NULL,

	PRIMARY KEY Merchandise_pk (name)
);

 /*------------------------------------------------------------------
	Supplier
--------------------------------------------------------------------*/
CREATE TABLE Supplier (
	name VARCHAR(50) NOT NULL,
	email VARCHAR(20),
	phone VARCHAR(12),

	PRIMARY KEY Supplier_pk (name)
);

 /*------------------------------------------------------------------
	Part
--------------------------------------------------------------------*/
CREATE TABLE Part (
	name VARCHAR(50) NOT NULL,

	PRIMARY KEY Part_pk (name)
);

 /*------------------------------------------------------------------
    Maint_Item_Work
--------------------------------------------------------------------*/
CREATE TABLE Maintenance_Item_Work (
	itemWorkID int NOT NULL AUTO_INCREMENT,
	mechanicID int NOT NULL,
	ST_ID int NOT NULL,
	custID int NOT NULL,
	date Date NOT NULL,
	vehicleID int NOT NULL,
	maint_item_name VARCHAR(40) NOT NULL,
	finalCost int,

	PRIMARY KEY Maintenance_Item_Work_pk (itemWorkID),
	CONSTRAINT Employee_Maintenance_Item_Work_fk (mechanicID) REFERENCES Employee (employeeID),
	CONSTRAINT visit_Maintenance_Item_Work_fk (ST_ID, custID, date, vehicleID) REFERENCES Visit (ST_ID, custID, date, vehicleID),
	CONSTRAINT Vehicle_Maintenance_Maintenance_Item_Work_fk (vehicleID, maint_item_name) REFERENCES Vehicle_Maintenance (vehicleID, maint_item_name),
	CONSTRAINT Maintenance_Item_Work_ck UNIQUE (mechanicID, ST_ID, custID, date, vehicleID, maint_item_name)
);

 /*------------------------------------------------------------------
	Merchandise_Purchase
--------------------------------------------------------------------*/
CREATE TABLE Merchandise_Purchase (
	purchaseID int NOT NULL AUTO_INCREMENT,
	ST_ID int NOT NULL,
	custID int NOT NULL,
	date Date NOT NULL,
	vehicleID int NOT NULL,
	itemSerialNum int NOT NULL,

	PRIMARY KEY Merchandise_Purchase_pk (purchaseID),
	CONSTRAINT visit_Merchandise_Purchase_fk (ST_ID, custID, date, vehicleID) REFERENCES Visit (ST_ID, custID, date, vehicleID),
	CONSTRAINT Merchandise_Item_InStore_Merchandise_Purchase_fk (itemSerialNum) REFERENCES Merchandise_Item_InStore (serialNum),
	CONSTRAINT Merchandise_Purchase_ck UNIQUE (ST_ID, custID, date, vehicleID, itemSerialNum)
);

 /*------------------------------------------------------------------
	Visit
--------------------------------------------------------------------*/
CREATE TABLE Visit (
	ST_ID int NOT NULL,
	custID int NOT NULL,
	date Date NOT NULL,
	vehicleID int NOT NULL,
	pointsUsed int,

	PRIMARY KEY Visit_pk (ST_ID, custID, date, vehicleID),
	CONSTRAINT Employee_Visit_fk (ST_ID) REFERENCES Employee (employeeID),
	CONSTRAINT Vehicle_Owner_Visit_fk (custID, vehicleID) REFERENCES Vehicle_Owner (custID, vehicleID)
);

 /*------------------------------------------------------------------
	Maintenance_Interval_Item
--------------------------------------------------------------------*/
CREATE TABLE Maintenance_Interval_Item (
	numMiles int NOT NULL,
	vehicleID int NOT NULL,
	maint_item_name VARCHAR(40) NOT NULL,

	PRIMARY KEY Maintenance_Interval_Item_pk (numMiles, vehicleID, maint_item_name),
	CONSTRAINT Vehicle_Interval_Maintenance_Interval_Item_fk (numMiles, vehicleID) REFERENCES Vehicle_Interval (milesDriven, vehicleID),
	CONSTRAINT Vehicle_Maintenance_Maintenance_Interval_Item_fk (vehicleID, maint_item_name) REFERENCES Vehicle_Maintenance (vehicleID, maint_item_name)
);

 /*------------------------------------------------------------------
	Service_Technician
--------------------------------------------------------------------*/
CREATE TABLE Service_Technician();

 /*------------------------------------------------------------------
 Maint_Pack_Item
--------------------------------------------------------------------*/
CREATE TABLE Maint_Pack_Item();

 /*------------------------------------------------------------------
 Mechanic
--------------------------------------------------------------------*/
CREATE TABLE Mechanic();

 /*------------------------------------------------------------------
 Certified_Mechanic
--------------------------------------------------------------------*/
CREATE TABLE Certified_Mechanic();

 /*------------------------------------------------------------------
 Specific_Cert
--------------------------------------------------------------------*/
CREATE TABLE Specific_Cert();

 /*------------------------------------------------------------------
 Certification
--------------------------------------------------------------------*/
CREATE TABLE Certification();

 /*------------------------------------------------------------------
 Promoted_to_ST
--------------------------------------------------------------------*/
CREATE TABLE Promoted_to_ST();

 /*------------------------------------------------------------------
 Skill
--------------------------------------------------------------------*/
CREATE TABLE Skill();

 /*------------------------------------------------------------------
 Mechanic_Skill
--------------------------------------------------------------------*/
CREATE TABLE Mechanic_Skill();

 /*------------------------------------------------------------------
 Mentorship
--------------------------------------------------------------------*/
CREATE TABLE Mentorship();

 /*------------------------------------------------------------------
 Employee_of_The_Month
--------------------------------------------------------------------*/
CREATE TABLE Employee_of_The_Month();

 /*------------------------------------------------------------------
 Reward
--------------------------------------------------------------------*/
CREATE TABLE Reward();

 /*------------------------------------------------------------------
 Employee_Reward
--------------------------------------------------------------------*/
CREATE TABLE Employee_Reward();
/*------------------------------------------------------------------
Employee_Reward
--------------------------------------------------------------------*/
CREATE TABLE Employee_Type(
  `type` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`type`));
 /*------------------------------------------------------------------
 Employee
--------------------------------------------------------------------*/
CREATE TABLE Employee(
  `employeeID` INT NOT NULL AUTO_INCREMENT,
  `type` VARCHAR(50) NOT NULL,
  `firstName` VARCHAR(50) NULL,
  `lastName` VARCHAR(50) NULL,
  `phone` INT NULL,
  PRIMARY KEY (`employeeID`),
  INDEX `type_idx` (`type` ASC),
  CONSTRAINT `type`
    FOREIGN KEY (`type`)
    REFERENCES `Employee_Type` (`type`));

 /*------------------------------------------------------------------
 Hours_per_Year
--------------------------------------------------------------------*/
CREATE TABLE Hours_per_Year();

 /*------------------------------------------------------------------
 Past
--------------------------------------------------------------------*/
CREATE TABLE Past();

 /*------------------------------------------------------------------
 Present
--------------------------------------------------------------------*/
CREATE TABLE Present(
  `startDate` DATETIME NOT NULL,
  `tierNumber` INT NOT NULL,
  `employeeID` INT NOT NULL,
  PRIMARY KEY (`employeeID`),
  INDEX `tierNumber_idx` (`tierNumber` ASC),
  CONSTRAINT `tierNumber`
    FOREIGN KEY (`tierNumber`)
    REFERENCES `Benefits_Tier` (`tierNumber`),
    
    
    
    
  CONSTRAINT `employeeID`
    FOREIGN KEY (`employeeID`)
    REFERENCES `Employee` (`employeeID`));

 /*------------------------------------------------------------------
 Benefits_Tier
--------------------------------------------------------------------*/
CREATE TABLE Benefits_Tier(
  `tierNumber` INT NOT NULL,
  `vacationPerHourRate` FLOAT NULL,
  `sickPerHourRate` FLOAT NULL,
  `minYearOnJob` INT NULL,
  PRIMARY KEY (`tierNumber`));

 /*------------------------------------------------------------------
 Retirement_Tier
--------------------------------------------------------------------*/
CREATE TABLE Retirement_Tier(
  `tierNumber` INT NOT NULL,
  `baseDollarRate` INT NOT NULL,
  `minYearsOnJob` INT NOT NULL,
  PRIMARY KEY (`tierNumber`));

 /*------------------------------------------------------------------
 Safety_Class
--------------------------------------------------------------------*/
CREATE TABLE Safety_Class();

 /*------------------------------------------------------------------
 Safety_Class_Attendee
--------------------------------------------------------------------*/
CREATE TABLE Safety_Class_Attendee();

 /*------------------------------------------------------------------
Vehicle
--------------------------------------------------------------------*/
CREATE TABLE Vehicle();

 /*------------------------------------------------------------------
Customer
--------------------------------------------------------------------*/
CREATE TABLE Customer();

 /*------------------------------------------------------------------
Vehicle_Owner
--------------------------------------------------------------------*/
CREATE TABLE Vehicle_Owner();

 /*------------------------------------------------------------------
ZipArea
--------------------------------------------------------------------*/
CREATE TABLE ZipArea();

 /*------------------------------------------------------------------
Individual
--------------------------------------------------------------------*/
CREATE TABLE Individual();

 /*------------------------------------------------------------------
Business
--------------------------------------------------------------------*/
CREATE TABLE Business();

 /*------------------------------------------------------------------
Referred
--------------------------------------------------------------------*/
CREATE TABLE Referred();

 /*------------------------------------------------------------------
Referred_by_Steady
--------------------------------------------------------------------*/
CREATE TABLE Referred_by_Steady();

 /*------------------------------------------------------------------
Referred_by_Premier
--------------------------------------------------------------------*/
CREATE TABLE Referred_by_Premier();

 /*------------------------------------------------------------------
Steady
--------------------------------------------------------------------*/
CREATE TABLE Steady();

 /*------------------------------------------------------------------
Prospective
--------------------------------------------------------------------*/
CREATE TABLE Prospective();

 /*------------------------------------------------------------------
Referred_by_Steady
--------------------------------------------------------------------*/
CREATE TABLE Steady_Email();

 /*------------------------------------------------------------------
Prospective_Email
--------------------------------------------------------------------*/
CREATE TABLE Prospective_Email();

 /*------------------------------------------------------------------
Email
--------------------------------------------------------------------*/
CREATE TABLE Email();

 /*------------------------------------------------------------------
Referred_by_Steady
--------------------------------------------------------------------*/
